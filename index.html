<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Odin Project - Rock, Paper, Scissors</title>
</head>
<body>
  <button>Rock</button>
  <button>Paper</button>
  <button>Scissors</button>
  
</body>
<script>
  let possibleChoices = ["rock","paper","scissors"];

  function getComputerChoice() {
    return possibleChoices[Math.floor(Math.random()*3)];
  }

  function playRound(playerSelection, computerSelection) {
       
    if (computerSelection === playerSelection){
      return "You tie!"
    }
    
    switch (playerSelection){
      case "rock":
        return computerSelection === "paper" ? "You lose! Paper beats Rock" :
        "You win! Rock beats Scissors";
      
      case "paper":
        return computerSelection === "rock" ? "You win! Paper beats Rock" :
        "You lose! Scissors beats Paper";

      case "scissors":
        return computerSelection === "rock" ? "You lose! Rock beats Scissors" :
        "You win! Scissors beats Paper";
      }
  }

  function whoWonGame(playerScore, computerScore){
   if (playerScore > computerScore){
      return "YOU WON THE GAME!";
    }
    if (computerScore > playerScore){
      return "OH NOOO! YOU LOST...";
    }
    if (playerScore === computerScore){
      return "Well done both, you tied!";
    }
  }

  function game(){
    let playerScore=0;
    let computerScore=0;

    for (let i = 0; i < 5; i++) {
      let playerSelection = prompt("What's your play?").toLowerCase();
      while (!possibleChoices.includes(playerSelection)){
        playerSelection = prompt("Your choice is not valid! What's your play?")
          .toLowerCase();
      }
      
      let computerSelection = getComputerChoice();

      let result = playRound(playerSelection, computerSelection);
      if (result.includes("tie")){
        playerScore++;
        computerScore++;
      }
      else if (result.includes("win")){
        playerScore++;
      }
      else {
        computerScore++;
      }

      console.log(result + `. You: ${playerScore} pts. Computer: ${computerScore} pts.`);
    }
    
    console.log(whoWonGame(playerScore, computerScore));
  }

  game();

</script>
</html>